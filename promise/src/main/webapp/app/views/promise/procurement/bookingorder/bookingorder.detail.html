<div class="app-view-header">
	<span translate="promise.procurement.master.bookingOrder.view.shopping_cart"></span>
	<!-- <small ng-bind="app.name + ' - ' + app.description"></small> -->
</div>

<!--START CONTROLLER-->
<div class="panel panel-primary"
	ng-controller="bookingOrderDtlCtrl as vm">

	<div class="panel panel-primary">
		<!-- ng-show="showFormCreateSo" id="anchor1" -->
		<div class="panel-body" style="position:relative;padding:30px;">
			<div class="row">

				<h4 ng-class="'bg-' + app.theme.name" class="panel-heading" style="position:relative;margin-left:-14px;margin-right:-14px">
					<span translate="promise.procurement.master.bookingOrder.view.create_BO"></span>
				</h4>
				<div class="col-md-12">
					<form method="post" action="#" novalidate="" class="form-horizontal">
						<fieldset>
							<div class="form-group">
								<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.doc_type"></span></label>
								<div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="bookingOrder.gvDoctype" disabled
										id="docType" name="docType" ><br />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.headernote"></span></label>
								<div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="bookingOrder.gvHeadnote" disabled
										id="gvHeadnote" name="gvHeadnote" ><br />
								</div>
							</div>
							
							<!-- <div class="form-group">
								<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.intermsof"></span></label>
								<div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="bookingOrder.gvIntermsoft" disabled
										id="gvIntermsoft" name="gvIntermsoft" ><br />
								</div>
							</div>
							
							<div class="form-group">
								<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.attachment"></span></label>
								<div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="bookingOrder.gvAttachment" disabled
										id="gvAttachment" name="gvAttachment" ><br />
								</div>
							</div>
							
							<div class="form-group">
									<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.requisitioner"></span></label>
									<div class="col-sm-4">
										<input type="text" class="form-control"
											ng-model="bookingOrder.gvRequisitioner" disabled
											id="gvRequisitioner" name="gvRequisitioner" ><br />
									</div>
							</div> -->
							<div class="form-group">
								<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.cost_center"></span></label>
								<div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="vm.prItemList[0].costCenterSap.code" disabled
										id="costCenter" name="costCenter" ><br />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.pur_group"></span></label>
					               <div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="vm.prItemList[0].purGroupSap.code" disabled
										id="purGroup" name="purGroup" ><br />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.store_loc"></span></label>
					               <div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="vm.prItemList[0].storeLocSap.code" disabled
										id="storeLoc" name="storeLoc" ><br />
								</div>
							</div>
							
							<div class="form-group">
								<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.purch_org"></span></label>
					               <div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="bookingOrder.purchOrg.code" disabled
										id="purchOrg" name="purchOrg" ><br />
								</div>
							</div>
							
							<div class="form-group">
								<label class="col-sm-4 control-label" align="left"><span translate="promise.procurement.master.bookingOrder.view.acctasscat"></span><strong style="color: red">*</strong></label>
					               <div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="vm.prItemList[0].acctasscat" disabled
										id="acctasscat" name="acctasscat" ><br />
								</div>
							</div>
						</fieldset>
						<hr style="position:relative;margin-top:0px;">
					</form>
				</div>
			</div>
			<div class="row">
				<div class="form-group m-b-sm" ng-repeat="shipTo in vm.shipping track by $index" ng-init="indexShipTo = $index">
				<div class="col-md-12">
				 <strong style="font-size: 20px;">Shipping  {{ indexShipTo+1 }}</strong>
					<div align="center" ng-if="loading == true">
						<strong><em>Loading...</em><img src="app/img/loading.gif"
							width="20px"></strong>
							
					</div>
					<form method="post" action="#" novalidate=""
						class="form-horizontal">
						<fieldset>
							<br />
							<h5 class="form-group" align="left">
								<label class="col-sm-3 control-label">
									<span translate="promise.procurement.master.bookingOrder.view.ship_to"></span>
								</label>
							</h5>
							<div class="form-group">
								<label class="col-sm-4 control-label"><span translate="promise.procurement.master.bookingOrder.view.nama"></span></label>
								<div class="col-sm-4">
									<input type="text" class="form-control"
										ng-model="shipTo.fullName" disabled><strong
										style="color: red">{{errormessageFieldNmShip}}</strong> <br />
								</div>
							</div>
								
							<div class="form-group">
								<label class="col-sm-4 control-label">
									<span translate="promise.procurement.master.bookingOrder.view.address"></span></label>
										<div class="col-sm-4">
										<textarea disabled class="form-control" ng-model="shipTo.streetAddress" rows="3" cols="5">
											{{shipTo.addressLabel+', '+shipTo.streetAddress+', '+shipTo.city+', '+shipTo.country}}
										</textarea>
								</div>
							</div>
							
							<div class="form-group">
								<label class="col-sm-4 control-label">
									<span translate="promise.procurement.master.bookingOrder.view.telephone"></span></label>
										<div class="col-sm-4">
											<input disabled promise-numbers-only-copy type="text" class="form-control"
										ng-model="shipTo.telephone" >
								</div>
							</div>
							
							<div class="form-group">
								<label class="col-sm-4 control-label">
									<span translate="promise.procurement.master.bookingOrder.view.bo_number"></span></label>
										<div class="col-sm-4">
										<input disabled type="text" class="form-control" ng-model="bookingOrder.boNumber">
								</div>
							</div>
							
							<div class="form-group">
								<label class="col-sm-4 control-label">
									<span translate="promise.procurement.master.bookingOrder.view.sla"></span></label>
										<div class="col-sm-4">
									<input ng-disabled="vm.isNew || vm.role" type="text" promise-numbers-only-copy  class="form-control"
										ng-model="vm.slaDeliveryTimeList[indexShipTo]">
								</div>
								<label class="control-label"><span translate="promise.procurement.master.bookingOrder.view.day"></span></label>
							</div>

							<div class="form-group">
								<label class="col-sm-4 control-label">
									<span translate="promise.procurement.master.bookingOrder.view.vendor_name"></span></label>
										<div class="col-sm-4">
										<input type="text" class="form-control" ng-model="vm.prItemList[0].vendorname" disabled>
								</div>
							</div>
						</fieldset>
						<hr style="position:relative;margin-top:0px;">
					</form>
				</div>
				<div class="form-group">
					<div class="col-sm-12">
						<div class="table-responsive">
							<hr style="position:relative;margin-bottom:0px;">
							<table datatables class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
								<thead>
									<tr style="font-weight: bold">
										<th scope="col"style="width: 2%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.no"></span></th>
										<th scope="col"style="width: 15%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.item_code"></span></th>
										<th scope="col"style="width: 20%; text-align: center"><span>GL Account</span></th>
										<th scope="col"style="width: 20%; text-align: center"><span><span translate="promise.procurement.master.bookingOrder.list.item_decription"></span></span></th>
										<th scope="col"style="width: 15%; text-align: center"><span><span translate="promise.procurement.master.bookingOrder.list.quantity"></span></span></th>
										<th scope="col"style="width: 10%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.discount"></span></th>
										<th scope="col"style="width: 10%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.ppn"></span></th>
										<th scope="col"style="width: 10%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.price"></span></th>
										<th scope="col"style="width: 10%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.price"></span>(Nett)</th>
										<th scope="col"style="width: 10%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.price_with_discount"></span></th>
										<th scope="col"style="width: 10%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.total"></span></th>
										<th scope="col"style="width: 10%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.ongkos_kirim"></span></th>
										<th scope="col"style="width: 15%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.sub_total"></span></th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="prItem in vm.prItemListNew[indexShipTo]">
										<td style="text-align: center">{{ $index+1 }}</td>
										<td style="text-align: center">{{ prItem.catalog.item.kode }}</td>
										<td style="text-align:center">{{ prItem.gLAccountSap.code }}</td>      
										<td style="text-align: center">{{ prItem.catalog.catalogContractDetail.itemDesc}}</td>
										<td style="text-align: center">{{ prItem.quantity }} {{ prItem.catalog.satuan.nama }}</td>
										<td style="text-align: center">{{ prItem.discount }} %</td>
										<td style="text-align: center">{{ prItem.catalog.catalogKontrak.isPpn==1?10:0 }}</td>
										<td style="text-align: right">{{ prItem.normalPrice | currency:'' }}</td>
										<td style="text-align: center">{{ vm.priceIncludePPN[indexShipTo][$index] | currency:''}}</td>
										<td style="text-align: right">{{ prItem.price | currency:'' }}</td>
										<td style="text-align: right">{{ prItem.total | currency:'' }}</td>
										<td style="text-align: right">{{ prItem.ongkosKirim | currency:'' }}</td>
										<!-- <td style="text-align: center"><input type="checkbox" ng-disabled="true" ng-model="vm.asuransi[$index]"> {{ prItem.asuransi }} %</td> -->
										<td style="text-align: right">
											<div>{{ (prItem.total
												+ prItem.ongkosKirim + ((prItem.asuransi/100)*prItem.total)) | currency:''
												}}</div>
										</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
	                                    <th scope="col"colspan="10" style="text-align: right;"><span translate="promise.procurement.master.bookingOrder.list.totalCaps"></span></th>
	                                    <!-- <th scope="col"style="text-align: right">{{ grandTotal | currency:'' }} IDR	</th> -->
	                                    <th scope="col"style="text-align: right;">{{ vm.totalHargaShipTo[indexShipTo] | currency:'' }}</th>
	                                    <th scope="col"style="text-align: right;">{{ vm.totalOngkirShipTo[indexShipTo] | currency:'' }}</th>
	                                    <th scope="col"style="text-align: right;">{{ vm.subTotalShipTo[indexShipTo] | currency:'' }}</th>
	                                </tr>
								</tfoot>
							</table>
						</div>
					</div>
				</div>
				<div class="col-sm-12">	
					<div class="col-md-12" style="text-align: right;">
						<font size="2">) Harga Total belum termasuk penambahan PPN sebesar 10%</font>
					</div>						
				</div>
			</div>
				<div class="col-sm-12">
		            <table datatables class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%" style="position:relative;margin-top:-30px;">
		                <thead>
		                    <tr style="font-weight: bold;">
		                        <th scope="col"colspan="12" style="width: 100%; text-align: center;"><strong>GRAND TOTAL</strong></th>
		                    </tr>
		                </thead>
		                <tbody></tbody>
		
		                <tfoot>
		                	<tr>
								<th scope="col"colspan="10" style="text-align: right"><span>TOTAL (Rp)</span></th>
								<th scope="col"style="text-align: right">
								{{ vm.total | currency:''}}
								</th>
							</tr>
							<tr>
								<th scope="col"colspan="10" style="text-align: right"><span>TOTAL ONGKOS KIRIM (Rp)</span></th>
								<th scope="col"style="text-align: right">
									{{ vm.totalOngkirAll  | currency:''}}
								</th>
							</tr>
							<tr>
								<th scope="col"colspan="10" style="text-align: right"><span>GRAND
										TOTAL (Rp)</span></th>
								<!-- <th scope="col"style="text-align: center">{{vm.prItemList[0].catalog.mataUang.kode}}</th> -->
								<!-- <th scope="col"style="text-align: right">{{ grandTotal | currency:'' }} IDR	</th> -->
								<th scope="col"style="text-align: right">
									{{
									vm.grandTotal  | currency:''
									}}</th>
							</tr>
		                </tfoot>
		            </table>
		        </div>
			</div>
			<br /> <br />
			<div class="row">
				<div class="form-group">
					<div class="app-view-header">
						&nbsp;&nbsp;&nbsp;Approval <strong>Confirmation Vendor</strong> Log
					</div>
					<div class="col-sm-2"></div>
					<div class="col-sm-12">
						<div class="table-responsive">
							<hr style="position:relative;margin-bottom:0px;">
							<table datatables
								class="table table-striped table-bordered dt-responsive nowrap"
								cellspacing="0" width="100%">
								<thead>
									<tr style="font-weight: bold">
										<th scope="col"style="width: 2%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.no"></span></th>
										<th scope="col"style="width: 15%; text-align: center"><span translate="promise.procurement.master.bookingOrder.view.approval"></span></th>
										<th scope="col"style="width: 20%; text-align: center"><span translate="promise.procurement.master.bookingOrder.view.approval_status"></span></th>
										<th scope="col"style="width: 20%; text-align: center"><span translate="promise.procurement.master.bookingOrder.view.note"></span></th>
										<th scope="col"style="width: 10%; text-align: center"><span translate="promise.procurement.master.bookingOrder.view.approval_date"></span></th>
									</tr>
									<tr ng-hide="vm.approvalProcessVendorList.length">
										<td style="text-align: center" colspan="5"><span translate="promise.procurement.master.bookingOrder.view.no_data"></span></td>
									</tr>
								</thead>
								<tbody>
									<tr
										ng-repeat="approvalProcessVendor in vm.approvalProcessVendorList">
										<td class="text-center">{{ $index+1 }}</td>
										<td ng-bind="approvalProcessVendor.user.namaPengguna"></td>
										<td><span ng-if=approvalProcessVendor.status==2>Rejected
										</span> <span ng-if=approvalProcessVendor.status==3>Approved</span></td>
										<td ng-bind="approvalProcessVendor.keterangan"></td>
										<td>{{ approvalProcessVendor.updated |
											date:"dd-MM-yyyy"}}</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<br /> <br />
				<div class="form-group" ng-show="vm.hidenLogUser">
					<div class="app-view-header">
						&nbsp;&nbsp;&nbsp;Approval <strong>Internal</strong> Log
					</div>
					<div class="col-sm-12">
						<div class="table-responsive">
							<hr style="position:relative;margin-bottom:0px;">
							<table datatables
								class="table table-striped table-bordered dt-responsive nowrap"
								cellspacing="0" width="100%">
								<thead>
									<tr style="font-weight: bold">
										<th scope="col"style="width: 2%; text-align: center"><span translate="promise.procurement.master.bookingOrder.list.no"></span></th>
										<th scope="col"style="width: 15%; text-align: center"><span translate="promise.procurement.master.bookingOrder.view.approval"></span></th>
										<th scope="col"style="width: 20%; text-align: center"><span translate="promise.procurement.master.bookingOrder.view.approval_status"></span></th>
										<th scope="col"style="width: 20%; text-align: center"><span translate="promise.procurement.master.bookingOrder.view.note"></span></th>
										<th scope="col"style="width: 10%; text-align: center"><span translate="promise.procurement.master.bookingOrder.view.approval_date"></span></th>
									</tr>
								</thead>
								<tbody>
									<tr
										ng-repeat="approvalInternalLogUserList in vm.approvalInternalLogUserList">
										<td class="text-center">{{ $index+1 }}</td>
										<td ng-bind="approvalInternalLogUserList[0]"></td>
										<td><span ng-if=approvalInternalLogUserList[1]==2>Rejected
										</span> <span ng-if=approvalInternalLogUserList[1]==3>Approved</span>
										</td>
										<td><span ng-if=approvalInternalLogUserList[2]==null>-</span>
											<span ng-bind="approvalInternalLogUserList[2]"></span></td>
										<td>{{ approvalInternalLogUserList[3] |
											date:"dd-MM-yyyy"}}</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<br /> <br />
				<div class="row" ng-show="vm.hidenApproveReject">
					<form class="form-horizontal" name="formLogApprovalVendor">
						<div class="row">
							<div class="text-center">
								<h3><span translate="promise.procurement.master.bookingOrder.view.approve_this_request"></span></h3>
								<span><span translate="promise.procurement.master.bookingOrder.view.request_need_approve"></span></span>
							</div>
						</div>
						<div class="row">
							<div class="form-group text-center">
								<a class="btn btn-success" ng-click="btnSimpan(3)">Approve</a> <a
									class="btn btn-danger" ng-click="btnSimpan(2)">Reject</a>
							</div>
							<div class="form-group">
								<label class="col-lg-4 control-label text-right required">Note</label>
								<div class="col-lg-4">
									<textarea class="form-control shadow-z1 input-sm"
										ng-model="vm.note"
										style="margin: 0px; width: 350px; height: 125px;"></textarea>
									<strong style="color: red">{{errorNoteMessage}}</strong>
								</div>
							</div>
						</div>
					</form>
				</div>
				<br />
			</div>
			<div class="row" style="padding-top:100px;padding-bottom:50px;">
				<div class="col-md-12 text-center">
					<button type="button" ripple="" class="btn btn-default" ng-click="back()"><em class="fa fa-arrow-left"></em>
						<span translate="promise.procurement.master.bookingOrder.view.back"></span>
					</button>
					<br />
				</div>
			</div>
		</div>
	</div>
</div>


<!--END CONTROLLER-->